<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href='//fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/main.css">
    <title>AJAX with JavaScript</title>

    <script>

        var xhr = new XMLHttpRequest();   // Step1:  Create an XHR Object -- Tells Web Browser to get ready to use AJAX


        // Feature detection for CORS
        if ('withCredentials' in xhr) {
            xhr.open('GET', 'http://localhost:8080/TEST/JSON/sidebar.html', true);
            // Just like regular ol' XHR
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4) {
                    if (xhr.status >= 200 && xhr.status < 400) {
                        document.getElementById('ajax').innerHTML = xhr.responseText;  // responseText object - information server sends back
                    } else {
                        console.log("FUCK");
                    }
                }
            };


            function sendAJAX() {

                xhr.send();           // Step4:  Send the Request
                document.getElementById('load').style.display = "none";   //hide button
            }


        }


//        xhr.open('GET', 'http://localhost:8080/TEST/JSON/sidebar.html', true);

//        xhr.onreadystatechange = function () {    // Step2:  CALLBACK FUNCTION (Event Handler:  onreadystatechange)
//            // -- triggered when change in AJAX request
//            if (xhr.readyState === 4){
//
//                if (xhr.status === 200) {
//
//                    document.getElementById('ajax').innerHTML = xhr.responseText;  // responseText object - information server sends back
//                } else if (xhr.status === 404) {   // Status Text:  file not found
//                    console.log("Alert is:  ",  xhr.statusText);
//                } else if (xhr.status === 500) {   // server had problem
//                    alert(xhr.statusText);
//                }
//
//            }
//        };


//        xhr.open('GET', 'http://localhost:8080/TEST/JSON/sidebar.html');  //  Step3:  Open a request -- prepare browser for sending request


//        function sendAJAX() {
//
//            xhr.send();           // Step4:  Send the Request
//            document.getElementById('load').style.display = "none";
//        }



    </script>


</head>
<body>
<div class="grid-container centered">
    <div class="grid-100">
        <div class="contained">
            <div class="grid-100">
                <div class="heading">
                    <h1>Bring on the AJAX</h1>

                    <button id="load" onclick="sendAJAX()"> Bring It!</button>

                </div>

                <div id="ajax">


                </div>


            </div>
        </div>
    </div>
    </div>
</body>
</html>